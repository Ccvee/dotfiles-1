# specific to zsh!
# sourced by .zshrc

# https://github.com/jmcantrell/dotfiles-zsh/blob/master/zsh/conf.d/40-functions
# Change directory to the nearest repo root
cdr()
{
    local dir=${1:-$PWD}
    if [[ -d $dir/.svn ]]; then
        while [[ -d $dir/.. && -d $dir/../.svn ]]; do
            dir+=/..
        done
    else
        while [[ -d $dir && ! ( -d $dir/.git || -d $dir/.hg || -d $dir/.bzr ) ]]; do
            dir+=/..
        done
    fi
    [[ -d $dir ]] && cd "$dir"
}

# type localip to get ethernet or wireless ip
localip() {
  local localip="`ipconfig getifaddr en0`"
  if [[ "$localip" = "" ]]; then
    localip="`ipconfig getifaddr en1`"
  fi
  echo $localip
}

# colored path from https://github.com/myfreeweb/zshuery/blob/master/zshuery.sh
path() {
  echo $PATH | tr ":" "\n" | \
    awk "{ sub(\"/usr\",   \"$fg_no_bold[green]/usr$reset_color\"); \
           sub(\"/bin\",   \"$fg_no_bold[blue]/bin$reset_color\"); \
           sub(\"/opt\",   \"$fg_no_bold[cyan]/opt$reset_color\"); \
           sub(\"/sbin\",  \"$fg_no_bold[magenta]/sbin$reset_color\"); \
           sub(\"/local\", \"$fg_no_bold[yellow]/local$reset_color\"); \
           print }"
}

