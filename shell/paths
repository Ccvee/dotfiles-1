#!/usr/bin/env bash

# 1.  don't bother checking for path existence since system will skip
#     automatically
# 2.  don't use BREW_PREFIX since we always want /usr/local/ paths

# Looks at leftmost first
# Bottom supercedes top

_add_my_paths() {
  # inherit system defaults and from
  # /etc/profile (which sources /etc/profile.d)
  my_path="$(command -p getconf PATH)"

  # reorder defaults?
  #my_path="/usr/bin:/bin:/usr/sbin:/sbin:$my_path"

  # package managers -----------------------------------------------------------

  # homebrew compatible
  my_path="/usr/local/sbin:$my_path"
  my_path="/usr/local/bin:$my_path"

  # composer
  my_path="$HOME/.composer/vendor/bin:$my_path"

  # npm binaries from npm installed via homebrew
  [ -d "$BREW_PREFIX/share/npm/bin" ] && {
    my_path="$BREW_PREFIX/share/npm/bin:$my_path"
  }

  # npm binaries from npm in home
  [ -d "$NPM_PACKAGES" ] && {
    my_path="$NPM_PACKAGES/bin:$my_path"
    unset MANPATH
    MANPATH="$NPM_PACKAGES/share/man:$(manpath)"
    export MANPATH
  }

  # go
  my_path="$GOPATH/bin:$my_path"

  # local ----------------------------------------------------------------------
  my_path="$DOTFILES/bin:$my_path"
  my_path="$HOME/bin:$my_path"

  export PATH="$my_path"
}

_add_my_paths

